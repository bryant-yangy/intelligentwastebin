webpackJsonp([3],{"/0DU":function(t,e){},yo8w:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),l=a.n(n),i=a("exGp"),o=a.n(i),r=a("bBUo"),c=a("mtWM"),s=a.n(c),u={data:function(){return{tableData:[],currentPage:1,limit:20,count:0,selectTable:{},dialogVisible:!1}},components:{headTop:r.a},created:function(){this.getCount(),this.getData()},methods:{getData:function(){var t=this;return o()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.tableData=[],a="?page="+t.currentPage+"&limit="+t.limit,s.a.get("http://127.0.0.1:8080/getProductPage"+a).then(function(e){0==e.data.code&&e.data.data.forEach(function(e){t.tableData.push(e)})},function(t){});case 3:case"end":return e.stop()}},e,t)}))()},getCount:function(){var t=this;return o()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.a.get("http://127.0.0.1:8080/getProductCount").then(function(e){0==e.data.code&&(t.count=e.data.data)},function(t){});case 1:case"end":return e.stop()}},e,t)}))()},updateProduct:function(){var t=this;return o()(l.a.mark(function e(){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogVisible=!1,(a=new FormData).append("id",t.selectTable.id),a.append("productName",t.selectTable.productName),a.append("infor",t.selectTable.infor),a.append("account",t.selectTable.account),a.append("points",t.selectTable.points),a.append("image",t.selectTable.image),console.log(a),n={headers:{"Content-Type":"multipart/form-data"}},s.a.post("http://127.0.0.1:8080/updateProduct",a,n).then(function(e){0==e.data.code?(alert("上传成功"),t.selectTable={},t.getData()):alert("上传失败")},function(t){}),t.selectTable={},t.getData();case 13:case"end":return e.stop()}},e,t)}))()},handleSizeChange:function(t){this.limit=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},handleEdit:function(t,e){this.selectTable=e,this.dialogVisible=!0},handleDelete:function(t,e){var a=this,n="?id="+e.id;s.a.get("http://127.0.0.1:8080/deleteProduct"+n).then(function(t){0==t.data.status&&(alert("删除成功"),a.getData())},function(t){alert("删除失败")})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("head-top"),t._v(" "),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"id",order:"escending"},data:t.tableData}},[a("el-table-column",{attrs:{sortable:"",prop:"id",label:"id",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"商品名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"infor",label:"商品信息",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"商品数量",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"points",label:"商品积分",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"image",label:"图片",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.image,"min-width":"300",height:"80"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改商品",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{model:t.selectTable}},[a("el-form-item",{attrs:{label:"商品名称",prop:"productName"}},[a("el-input",{model:{value:t.selectTable.productName,callback:function(e){t.$set(t.selectTable,"productName",e)},expression:"selectTable.productName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述信息",prop:"infor"}},[a("el-input",{model:{value:t.selectTable.infor,callback:function(e){t.$set(t.selectTable,"infor",e)},expression:"selectTable.infor"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品数量",prop:"account"}},[a("el-input",{attrs:{maxLength:"11"},model:{value:t.selectTable.account,callback:function(e){t.$set(t.selectTable,"account",t._n(e))},expression:"selectTable.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品积分",prop:"points"}},[a("el-input",{attrs:{maxLength:"11"},model:{value:t.selectTable.points,callback:function(e){t.$set(t.selectTable,"points",t._n(e))},expression:"selectTable.points"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"points"}},[a("img",{attrs:{src:t.selectTable.image,"min-width":"500",height:"200"}})])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateProduct}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(t){a("/0DU")},null,null);e.default=p.exports}});
//# sourceMappingURL=3.072ecd368ce84c56c2ec.js.map